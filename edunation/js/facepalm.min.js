!function(){var e={};e.launcher=function(){"function"==typeof e.page.default&&e.page.default();var t=window.location.pathname.match(new RegExp("^"+e.bazar.basePath+"(.*)$","i"))[1];if("/"==t)"function"==typeof e.page.index&&e.page.index();else{var a=t.match(/([\w\-]+)\/$/)[1],i=a.replace(/\-/g,"_");"string"==typeof a&&a.length&&("function"==typeof e.page[i]?e.page[i]():"function"==typeof e.page.alternate&&e.page.alternate())}},e.bazar={basePath:"/PiotrM/wp_edunation",logger:/logger/i.test(window.location.hash),mobile:/mobile/i.test(window.location.hash)||void 0},e.addon={isLogger:function(){return e.bazar.logger||!1},isMobile:function(){var t=e.bazar;return(t.logger||!1)&&console.log("isMobile()"),void 0===t.mobile&&(t.mobile=/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),t.mobile},youtube:function(t){try{var a=e.bazar.logger||!1;if("string"!=typeof t.ID)throw"Niepoprawny ID filmu";if(!$(t.iframe).length)throw"iframe nie istnieje";return t.autoplay=t.autoplay||0,t.loop=t.loop||0,t.controls=t.controls||1,t.beforePlay=t.beforePlay||function(){},t.onClose=t.onClose||function(){},{el:t.iframe,url:"https://www.youtube.com/embed/"+t.ID+"?controls="+t.controls+"&autoplay="+t.autoplay+"&loop="+t.loop,open:function(){t.beforePlay(this.el),$(this.el).attr({src:this.url})},close:function(){t.onClose(this.el),$(this.el).attr({src:""})}}}catch(e){a&&console.error(e)}},form:{filters:{imie:/^[a-zA-Z \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,nazwa:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,adres:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\.,\d]+$/,telefon:/^[\d\+ \(\)]+$/,mail:/^[^\d_\.\-][\w\d \.\-!#\$%&'\*\+\/=\?^`\{\|\}~]{1,64}@\w+(?:\.\w+)+$/,tekst:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]*$/,tekst_req:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]+$/},verify:function(t){e.addon.isLogger()&&console.log("form.verify()");var a=this;if("object"==typeof t&&"number"==typeof t.length){var n=[];for(i in t){var r=$(t[i].item).val();if("object"!=typeof t[i]||void 0===r||"string"!=typeof t[i].filterName||"string"!=typeof t[i].name||void 0===a.filters[t[i].filterName])return!1;a.filters[t[i].filterName].test(r)||n.push(t[i].item)}return!n.length||n}return!1}}},e.page={default:function(){e.addon.isLogger()&&(window.facepalm=e,console.log("page.default()"))},alternate:function(){e.addon.isLogger()&&console.log("page.alternate()")},index:function(){e.addon.isLogger()&&console.log("page.index()")},rezerwacja:function(){var t=e.addon,a=null,n={};t.isLogger()&&console.log("page.rezerwacja()"),function(t,i,r,o){var l=0,s=!1,d=function(){return $(t).children(".etap:first").outerWidth(!0)*l};t.on({set:function(e){l<0&&(l=t.children(".etap").length-1),l%=t.children(".etap").length,new TimelineLite({onComplete:function(){s=!1}}).add("start",0).add(TweenLite.to(t,.3,{scrollLeft:d(),ease:Power2.easeInOut}),"start")},next:function(e){s||(s=!0,l++,t.triggerHandler("set"))},prev:function(e){s||(s=!0,l--,t.triggerHandler("set"))}}),i.click(function(e){t.triggerHandler("next"),$(this).hide()}),r.click(function(a){var i=$("#rezerwacja .bot .etap.form form");if(!0===i.triggerHandler("test")){var r={};$.each(i.serializeArray(),function(e,t){r[t.name]=t.value}),window.meeting_data={meeting:n,form:r},$.post(e.bazar.basePath+"/register?meeting",{data:n,form:r},function(a,i){try{console.log(a);var n=JSON.parse(a);o.hide(),t.triggerHandler("next"),$.getScript(e.bazar.basePath+"/wp-content/themes/edunation/js/googlecal.min.js"),$("#rezerwacja .bot .etap.summary").triggerHandler("fill",[n.status,n.msg])}catch(e){console.error(e)}})}}),$(window).resize(function(){window.clearTimeout(a),a=window.setTimeout(function(){t.triggerHandler("set")},200)})}($("#rezerwacja .bot > .view"),$("#rezerwacja .side > .button.form"),$("#rezerwacja .side > .button.register"),$("#rezerwacja .side")),function(e,t,a,r,o,l,s,d,c,g,u,f,m){n={type:o.text().trim(),price:parseFloat(l.text().match(/(\d+(?:,\d+)?)\s*zł/)[1]),duration:parseInt(l.text().match(/(\d+)\s*min/)[1])};var p=new Date,h=new Date(p.getFullYear(),p.getMonth()),w=new Date(p.getFullYear(),p.getMonth()),b=["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"];s.parent().hide(),c.hide(),g.hide(),e.on({fill:function(e){month=w.getMonth(),year=w.getFullYear(),r.children(".name").text(function(){return b[month]+", "+w.getFullYear()}),t.removeClass("prev next current disable today");var a={start:t.filter("[wd="+w.getDay()+"]:first").index(),end:t.filter("[wd="+w.getDay()+"]:first").index()+new Date(w.getFullYear(),w.getMonth()+1,0).getDate()-1};t.slice(0,a.start).addClass("prev disable"),t.slice(a.start,a.end+1).addClass("current"),t.slice(a.end+1).addClass("next disable"),t.filter("[wd=6],[wd=0]").addClass("disable"),p.getMonth()===w.getMonth()&&t.slice(a.start,a.start+p.getDate()-1).addClass("disable"),w.getTime()<h.getTime()&&t.slice(a.start,a.end+1).addClass("disable");var n=new Date(w.getFullYear(),w.getMonth(),1-a.start),o=t.first();for(i=0;i<42;i++)o.attr({d:n.getDate(),m:n.getMonth(),y:n.getFullYear()}).children(".text").text(n.getDate()),o=o.next(),n.setDate(n.getDate()+1);t.filter("[d="+p.getDate()+"][m="+p.getMonth()+"][y="+p.getFullYear()+"]").addClass("today")},next:function(t){w.setMonth(w.getMonth()+1),e.triggerHandler("fill")},prev:function(t){w.setMonth(w.getMonth()-1),e.triggerHandler("fill")},reset:function(t){w=new Date(h.getTime()),e.triggerHandler("fill")},time:function(e,t){"open"===t?$.get("../register?slots="+[n.date.day,parseInt(n.date.month)+1,n.date.year,n.duration].join(";"),function(e){try{var t=JSON.parse(e);console.log(t),$.each(t,function(e,t){var a,i=new Date(1e3*t),n=i.getHours(),r=i.getMinutes();a=n<12?"rano":n<17?"popoludnie":"wieczor";var o=f.filter('[class*="'+a+'"]').children(".hide");o.clone().attr({h:n,m:r}).html(function(){return(n.toString().length<2?"0"+n:n)+":"+(r.toString().length<2?"0"+r:r)}).removeClass("hide").appendTo(o.parent())}),u.addClass("open")}catch(e){}}):"close"===t&&(u.find(".body .item:not(.hide)").remove(),u.removeClass("open"))}}),e.triggerHandler("fill"),e.find(".tbody").on("click",".tcell.prev",function(t){e.triggerHandler("prev")}),e.find(".tbody").on("click",".tcell.next",function(t){e.triggerHandler("next")}),e.find(".tbody").on("click",".tcell.current:not(.disable)",function(t){n.date={day:$(this).attr("d"),month:$(this).attr("m"),year:$(this).attr("y")},e.triggerHandler("time",["open"])}),u.add(u.find(".box > .close")).click(function(t){e.triggerHandler("time",["close"])}),u.children(".box").click(function(e){e.stopPropagation()}),u.find(".box .body").on("click",".item:not(.hide)",function(t){n.date.hour=$(this).attr("h"),n.date.minute=$(this).attr("m");var a=n.date.day.toString().length<2?"0"+n.date.day:n.date.day,i=n.date.hour.toString().length<2?"0"+n.date.hour:n.date.hour,r=n.date.minute.toString().length<2?"0"+n.date.minute:n.date.minute;s.text("Termin: "+a+" "+b[n.date.month]),d.text("Godzina: "+i+"."+r),e.triggerHandler("time",["close"]),s.parent().slideDown(),c.slideDown()}),r.children(".nav").click(function(t){$(this).hasClass("next")?e.triggerHandler("next"):$(this).hasClass("prev")&&e.triggerHandler("prev")}),a.click(function(t){e.triggerHandler("reset")})}($("#rezerwacja .etap.data"),$("#rezerwacja .etap.data > .body > .tbody > .tcell"),$("#rezerwacja .etap.data > .head > .button"),$("#rezerwacja .etap.data > .head > .month"),$("#rezerwacja .side > .top > .title"),$("#rezerwacja .side > .top > .cena"),$("#rezerwacja .side > .bot > .dzien"),$("#rezerwacja .side > .bot > .godzina"),$("#rezerwacja .side > .button.form"),$("#rezerwacja .side > .button.register"),$("#rezerwacja > .popup"),$("#rezerwacja > .popup .body > .pora"),$("#rezerwacja > .popup .body .item")),function(e,a,i){var n=[{name:"imie",item:e.find(".imie"),filterName:"imie"},{name:"mail",item:e.find(".mail"),filterName:"mail"},{name:"tel",item:e.find(".tel"),filterName:"telefon"},{name:"msg",item:e.find(".msg"),filterName:"tekst"}];e.on({test:function(e){var a=t.form.verify(n);return!0===a?i.show():i.hide(),a}}),a.blur(function(t){e.triggerHandler("test")})}($("#rezerwacja .bot .etap.form form"),$("#rezerwacja .bot .etap.form form").find("input, textarea"),$("#rezerwacja .bot > .side > .button.register")),function(e,t,a,i,n,r,o,l,s){e.on({fill:function(e,s,d){var c=window.meeting_data,g=["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","października","listopada","grudnia"],u=["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],f=new Date(c.meeting.date.year,c.meeting.date.month,c.meeting.date.day,c.meeting.date.hour,c.meeting.date.minute);"ok"===s?(i.show(),t.text("Wspaniale "+c.form.imie+"! Twoje zgłoszenie zostało pomyślnie dodane."),a.text("Otrzymasz potwierdzenie drogą mailową, czy termin spotkania został zaakceptowany."),n.text(c.meeting.date.day+" "+g[f.getDay()]),r.text(u[f.getDay()]+" "+f.getHours()+":"+f.getMinutes()),o.text(c.meeting.type),l.text(c.meeting.duration+" | "+c.meeting.price+" zł")):(i.hide(),t.text("Twoje zgłoszenie zostało odrzucone przez serwer."),a.text("Powód: "+d))}}),s.click(function(e){$.getScript("https://apis.google.com/js/api.js",function(e,t){"success"===t&&handleClientLoad()})})}($("#rezerwacja .bot .etap.summary"),$("#rezerwacja .bot .etap.summary > .title"),$("#rezerwacja .bot .etap.summary > .subtitle"),$("#rezerwacja .bot .etap.summary > .table"),$("#rezerwacja .bot .etap.summary > .table > .left > .title"),$("#rezerwacja .bot .etap.summary > .table > .left > .subtitle"),$("#rezerwacja .bot .etap.summary > .table > .right > .title"),$("#rezerwacja .bot .etap.summary > .table > .right > .subtitle:first"),$("#rezerwacja .bot .etap.summary > .table > .right > .button"))},spotkania:function(){e.addon.isLogger()&&console.log("page.spotkania()"),function(t,a,i,n,r,o){a.add(i).hide(),t.on({mouseenter:function(e){$(this).find(".body, .foot").slideDown()},mouseleave:function(e){$(this).find(".body, .foot").slideUp()}}),n.click(function(t){t.preventDefault();var a=$(this).parents(".item:first").attr("item");window.meeting_selected=window.meetings[a],window.meeting_btn=$(this)[0],window.meeting_url=$(this).attr("href"),$.getScript(e.bazar.basePath+"/wp-content/themes/edunation/js/googlecal_meeting.min.js",function(e,t){"success"===t&&$.getScript("https://apis.google.com/js/api.js",function(e,t){"success"===t&&handleClientLoad()})})})}($("#spotkania > .kafelki > .item"),$("#spotkania > .kafelki > .item > .box > .body"),$("#spotkania > .kafelki > .item > .box > .foot"),$("#spotkania > .kafelki > .item > .box > .foot > .button.accept"),$("#spotkania > .kafelki > .item > .box > .foot > .button.cancel"),$("#spotkania > .kafelki > .item > .box > .foot > .button.remove"))}},$(function(){e.launcher()})}();