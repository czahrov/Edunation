$(function(){function e(){gapi.client.init({apiKey:a,clientId:i,discoveryDocs:n,scope:o}).then(function(){$("#rezerwacja > .bot > .view > .etap.date").triggerHandler("init"),gapi.auth2.getAuthInstance().isSignedIn.listen(t),t(gapi.auth2.getAuthInstance().isSignedIn.get()),r.click(function(){console.log("login"),gapi.auth2.getAuthInstance().signIn()}),s.click(function(){console.log("logout"),gapi.auth2.getAuthInstance().signOut()})})}function t(e){e?(window.authorised=!0,r.hide(),s.show(),$("#event").show()):(window.authorised=!1,r.show(),s.hide(),$("#event").hide())}var i="330101275125-74jvdti5ufedltb82rsuel31dqiu7qf2.apps.googleusercontent.com",a="AIzaSyC2wgUJzQlqo924FvzKNOhaucbP9YRq4HM",n=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],o="https://www.googleapis.com/auth/calendar",r=$("#login"),s=$("#logout"),c="kaczanowskii@gmail.com";void 0===window.gapi&&$.getScript("https://apis.google.com/js/api.js",function(t,i){"success"===i&&gapi.load("client:auth2",e)}),window.gch={freeBusy:function(e,t){gapi.client.calendar.freebusy.query({items:[{id:c}],timeMin:new Date(e).toISOString(),timeMax:new Date(t).toISOString(),timeZone:"Europe/Warsaw"}).then(function(e){window.freeBusy=e.result.calendars,$("#rezerwacja > .bot > .view > .etap.date").triggerHandler("fill")})},addEvent:function(e,t,i,a){var n={end:{dateTime:new Date(t).toISOString(),timeZone:"Europe/Warsaw"},start:{dateTime:new Date(e).toISOString(),timeZone:"Europe/Warsaw"},summary:i,description:a,attendees:[{email:c}]};gapi.client.calendar.events.insert({calendarId:"primary",sendNotifications:!0,resource:n}).then(function(e){console.log(e),200===e.status?($("#rezerwacja > .popup > .box > .segment.foot").slideUp(),$("#rezerwacja > .bot > .view > .etap.date").triggerHandler("notify",["success","Great! It was easy, right? See you soon!<br><br>Niebawem otrzymasz potwierdzenie rezerwacji na Twój adres email."])):400===e.status&&$("#rezerwacja > .bot > .view > .etap.date").triggerHandler("notify",["fail","Wystąpił błąd. Proszę sprawdzić poprawność wprowadzonych danych i spróbować ponownie."])})}}});